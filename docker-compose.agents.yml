version: '3.8'# Quantum-Aero F1 Prototype - GenAI Agent Infrastructure# Multi-agent system powered by Claude AI and Agentcy frameworkservices:  # ============================================  # NATS MESSAGE BROKER  # ============================================  nats:    image: nats:2.11.8    container_name: qaero-nats    ports:      - "4222:4222"  # Client connections      - "8222:8222"  # HTTP monitoring      - "6222:6222"  # Cluster routing    command: [      "--jetstream",      "--store_dir=/data",      "--max_payload=10MB",      "--max_pending=1000MB"    ]    volumes:      - nats-data:/data    networks:      - qaero-agent-network    restart: unless-stopped    healthcheck:      test: ["CMD", "wget", "--spider", "-q", "http://localhost:8222/healthz"]      interval: 30s      timeout: 10s      retries: 3  # ============================================  # MASTER ORCHESTRATOR AGENT  # ============================================  master-orchestrator:    build:      context: ./agents/master_orchestrator      dockerfile: Dockerfile    container_name: qaero-master-agent    environment:      - ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY}      - ANTHROPIC_MODEL=claude-sonnet-4.5-20250929      - NATS_URL=nats://nats:4222      - MONGODB_URI=mongodb://mongodb:27017/qaero      - REDIS_URL=redis://redis:6379      - SLIM_HOST=0.0.0.0      - SLIM_PORT=6001      - OTEL_ENDPOINT=http://otel-collector:4317      - OTEL_ENABLED=true    ports:      - "6001:6001"    depends_on:      - nats      - mongodb      - redis    networks:      - qaero-agent-network      - qaero-network    restart: unless-stopped    deploy:      resources:        limits:          cpus: '4.0'          memory: 8G        reservations:          cpus: '2.0'          memory: 4G    healthcheck:      test: ["CMD", "curl", "-f", "http://localhost:6001/health"]      interval: 30s      timeout: 10s      retries: 3  # ============================================  # ML SURROGATE AGENT  # ============================================  ml-agent:    build:      context: ./agents/ml_surrogate      dockerfile: Dockerfile    container_name: qaero-ml-agent    environment:      - ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY}      - ANTHROPIC_MODEL=claude-haiku-4-20250514      - NATS_URL=nats://nats:4222      - ML_SERVICE_URL=http://ml-service:8000      - REDIS_URL=redis://redis:6379      - OTEL_ENDPOINT=http://otel-collector:4317    ports:      - "6004:6004"    depends_on:      - nats      - ml-service      - redis    networks:      - qaero-agent-network      - qaero-network    restart: unless-stopped    deploy:      replicas: 3  # Scale for high throughput      resources:        limits:          cpus: '2.0'          memory: 4G        reservations:          cpus: '1.0'          memory: 2G  # ============================================  # QUANTUM OPTIMIZER AGENT  # ============================================  quantum-agent:    build:      context: ./agents/quantum_optimizer      dockerfile: Dockerfile    container_name: qaero-quantum-agent    environment:      - ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY}      - ANTHROPIC_MODEL=claude-sonnet-4.5-20250929      - NATS_URL=nats://nats:4222      - QUANTUM_SERVICE_URL=http://quantum-service:8002      - REDIS_URL=redis://redis:6379    ports:      - "6005:6005"    depends_on:      - nats      - quantum-service    networks:      - qaero-agent-network      - qaero-network    restart: unless-stopped    deploy:      resources:        limits:          cpus: '4.0'          memory: 8G  # ============================================  # PHYSICS VALIDATOR AGENT  # ============================================  physics-agent:    build:      context: ./agents/physics_validator      dockerfile: Dockerfile    container_name: qaero-physics-agent    environment:      - ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY}      - ANTHROPIC_MODEL=claude-sonnet-4.5-20250929      - NATS_URL=nats://nats:4222      - PHYSICS_SERVICE_URL=http://physics-service:8001    ports:      - "6006:6006"    depends_on:      - nats      - physics-service    networks:      - qaero-agent-network      - qaero-network    restart: unless-stopped    deploy:      replicas: 2      resources:        limits:          cpus: '2.0'          memory: 4G  # ============================================  # ANALYSIS AGENT  # ============================================  analysis-agent:    build:      context: ./agents/analysis      dockerfile: Dockerfile    container_name: qaero-analysis-agent    environment:      - ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY}      - ANTHROPIC_MODEL=claude-sonnet-4.5-20250929      - NATS_URL=nats://nats:4222      - MONGODB_URI=mongodb://mongodb:27017/qaero      - QDRANT_HOST=qdrant      - QDRANT_PORT=6333    ports:      - "6007:6007"    depends_on:      - nats      - mongodb      - qdrant    networks:      - qaero-agent-network      - qaero-network    restart: unless-stopped    deploy:      resources:        limits:          cpus: '4.0'          memory: 8G  # ============================================  # VECTOR DATABASE (Qdrant)  # ============================================  qdrant:    image: qdrant/qdrant:latest    container_name: qaero-qdrant    ports:      - "6333:6333"    volumes:      - qdrant-data:/qdrant/storage    networks:      - qaero-agent-network    restart: unless-stopped    deploy:      resources:        limits:          cpus: '2.0'          memory: 4G  # ============================================  # OPENTELEMETRY COLLECTOR  # ============================================  otel-collector:    image: otel/opentelemetry-collector:latest    container_name: qaero-otel    command: ["--config=/etc/otel-collector-config.yaml"]    volumes:      - ./agents/observability/otel-collector-config.yaml:/etc/otel-collector-config.yaml    ports:      - "4317:4317"  # OTLP gRPC      - "4318:4318"  # OTLP HTTP      - "8888:8888"  # Prometheus metrics    depends_on:      - prometheus    networks:      - qaero-agent-network    restart: unless-stopped  # ============================================  # PROMETHEUS (Metrics)  # ============================================  prometheus:    image: prom/prometheus:latest    container_name: qaero-prometheus    command:      - '--config.file=/etc/prometheus/prometheus.yml'      - '--storage.tsdb.path=/prometheus'      - '--web.console.libraries=/usr/share/prometheus/console_libraries'      - '--web.console.templates=/usr/share/prometheus/consoles'    volumes:      - ./agents/observability/prometheus.yml:/etc/prometheus/prometheus.yml      - prometheus-data:/prometheus    ports:      - "9090:9090"    networks:      - qaero-agent-network    restart: unless-stopped  # ============================================  # GRAFANA (Visualization)  # ============================================  grafana:    image: grafana/grafana:latest    container_name: qaero-grafana    environment:      - GF_SECURITY_ADMIN_PASSWORD=${GRAFANA_PASSWORD:-admin}      - GF_INSTALL_PLUGINS=grafana-piechart-panel    volumes:      - grafana-data:/var/lib/grafana      - ./agents/observability/grafana-dashboards:/etc/grafana/provisioning/dashboards    ports:      - "3001:3000"    depends_on:      - prometheus    networks:      - qaero-agent-network    restart: unless-stopped# ============================================# NETWORKS# ============================================networks:  qaero-agent-network:    driver: bridge    name: qaero-agent-network  qaero-network:    external: true    name: qaero-network# ============================================# VOLUMES# ============================================volumes:  nats-data:  qdrant-data:  prometheus-data:  grafana-data: