#!/bin/bash# Evolution Components Setup Script# Automated installation and configuration for Phase 1 componentsset -e  # Exit on errorecho "=================================================="echo "  Quantum-Aero F1 Evolution Setup"echo "  Phase 1: Advanced AI Surrogates"echo "=================================================="echo ""# Colors for outputRED='\033[0;31m'GREEN='\033[0;32m'YELLOW='\033[1;33m'NC='\033[0m' # No Color# Check Python versionecho "Checking Python version..."python_version=$(python3 --version 2>&1 | awk '{print $2}')echo "  Python version: $python_version"if ! python3 -c 'import sys; assert sys.version_info >= (3, 9)' 2>/dev/null; then    echo -e "${RED}Ô£ù Python 3.9+ required${NC}"    exit 1fiecho -e "${GREEN}Ô£ô Python version OK${NC}"echo ""# Check Node.js versionecho "Checking Node.js version..."node_version=$(node --version 2>&1)echo "  Node.js version: $node_version"if ! node -e 'process.exit(parseInt(process.version.slice(1)) >= 18 ? 0 : 1)' 2>/dev/null; then    echo -e "${RED}Ô£ù Node.js 18+ required${NC}"    exit 1fiecho -e "${GREEN}Ô£ô Node.js version OK${NC}"echo ""# Create virtual environmentecho "Creating Python virtual environment..."if [ ! -d "venv" ]; then    python3 -m venv venv    echo -e "${GREEN}Ô£ô Virtual environment created${NC}"else    echo -e "${YELLOW}ÔÜá Virtual environment already exists${NC}"fiecho ""# Activate virtual environmentecho "Activating virtual environment..."source venv/bin/activateecho -e "${GREEN}Ô£ô Virtual environment activated${NC}"echo ""# Upgrade pipecho "Upgrading pip..."pip install --upgrade pip setuptools wheelecho -e "${GREEN}Ô£ô pip upgraded${NC}"echo ""# Install PyTorch with CUDA supportecho "Installing PyTorch with CUDA support..."echo "  This may take several minutes..."pip install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu118echo -e "${GREEN}Ô£ô PyTorch installed${NC}"echo ""# Install PyTorch Geometricecho "Installing PyTorch Geometric..."pip install torch-geometric torch-scatter torch-sparse torch-cluster -f https://data.pyg.org/whl/torch-2.1.0+cu118.htmlecho -e "${GREEN}Ô£ô PyTorch Geometric installed${NC}"echo ""# Install ML dependenciesecho "Installing ML dependencies..."pip install \    transformers>=4.36.0 \    diffusers>=0.25.0 \    stable-baselines3>=2.2.0 \    tensorboard>=2.15.0 \    h5py>=3.10.0 \    trimesh>=4.0.0echo -e "${GREEN}Ô£ô ML dependencies installed${NC}"echo ""# Install Quantum dependenciesecho "Installing Quantum dependencies..."pip install \    qiskit>=1.0.0 \    pennylane>=0.35.0 \    dwave-ocean-sdk>=6.7.0echo -e "${GREEN}Ô£ô Quantum dependencies installed${NC}"echo ""# Install API dependenciesecho "Installing API dependencies..."pip install \    fastapi>=0.109.0 \    uvicorn[standard]>=0.27.0 \    pydantic>=2.5.0 \    python-multipart>=0.0.6echo -e "${GREEN}Ô£ô API dependencies installed${NC}"echo ""# Install general dependenciesecho "Installing general dependencies..."pip install \    numpy>=1.24.0 \    scipy>=1.11.0 \    matplotlib>=3.8.0 \    pandas>=2.1.0 \    scikit-learn>=1.3.0 \    tqdm>=4.66.0echo -e "${GREEN}Ô£ô General dependencies installed${NC}"echo ""# Create directory structureecho "Creating directory structure..."mkdir -p data/cfd_dataset/{train,val}mkdir -p checkpoints/{aerotransformer,gnn_rans,vqe}mkdir -p runs/{aerotransformer,gnn_rans}mkdir -p logsecho -e "${GREEN}Ô£ô Directory structure created${NC}"echo ""# Install frontend dependenciesecho "Installing frontend dependencies..."cd frontendif [ ! -d "node_modules" ]; then    npm install    echo -e "${GREEN}Ô£ô Frontend dependencies installed${NC}"else    echo -e "${YELLOW}ÔÜá Frontend dependencies already installed${NC}"ficd ..echo ""# Create .env file from templateecho "Creating .env file..."if [ ! -f "agents/.env" ]; then    cp agents/.env.template agents/.env    echo -e "${GREEN}Ô£ô .env file created${NC}"    echo -e "${YELLOW}ÔÜá Please edit agents/.env and add your API keys${NC}"else    echo -e "${YELLOW}ÔÜá .env file already exists${NC}"fiecho ""# Test importsecho "Testing Python imports..."python3 << EOFtry:    import torch    import torch_geometric    import transformers    import qiskit    import fastapi    print("Ô£ô All imports successful")    print(f"  PyTorch version: {torch.__version__}")    print(f"  CUDA available: {torch.cuda.is_available()}")    if torch.cuda.is_available():        print(f"  CUDA device: {torch.cuda.get_device_name(0)}")except ImportError as e:    print(f"Ô£ù Import error: {e}")    exit(1)EOFif [ $? -eq 0 ]; then    echo -e "${GREEN}Ô£ô Python environment verified${NC}"else    echo -e "${RED}Ô£ù Python environment verification failed${NC}"    exit 1fiecho ""# Print summaryecho "=================================================="echo "  Setup Complete!"echo "=================================================="echo ""echo "Next steps:"echo "  1. Activate virtual environment:"echo "     source venv/bin/activate"echo ""echo "  2. Configure API keys in agents/.env"echo ""echo "  3. Start AeroTransformer API:"echo "     python -m ml_service.models.aero_transformer.api"echo ""echo "  4. Start GNN-RANS API:"echo "     python -m ml_service.models.gnn_rans.api"echo ""echo "  5. Start frontend:"echo "     cd frontend && npm start"echo ""echo "  6. Access dashboards:"echo "     http://localhost:3000"echo ""echo "=================================================="echo ""# Save installed packagesecho "Saving installed packages..."pip freeze > requirements-evolution.txtecho -e "${GREEN}Ô£ô Requirements saved to requirements-evolution.txt${NC}"echo ""echo -e "${GREEN}Setup complete! ­ƒÄë${NC}"