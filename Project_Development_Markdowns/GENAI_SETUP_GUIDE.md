# ­ƒñû GenAI Multi-Agent System - Setup GuideComplete setup guide for the Quantum-Aero F1 Prototype GenAI system powered by Anthropic Claude.---## ­ƒôï Table of Contents1. [Prerequisites](#prerequisites)2. [Environment Setup](#environment-setup)3. [Claude API Configuration](#claude-api-configuration)4. [NATS/SLIM Infrastructure](#natsslim-infrastructure)5. [Agent Deployment](#agent-deployment)6. [Testing & Verification](#testing--verification)7. [Troubleshooting](#troubleshooting)---## ­ƒöº Prerequisites### Required Software- **Python 3.10+** (for agents)- **Docker & Docker Compose** (for infrastructure)- **Node.js 18+** (for frontend)- **Git** (for version control)### Required Accounts- **Anthropic Account**: Get your Claude API key from [console.anthropic.com](https://console.anthropic.com/)### System Requirements- **CPU**: 8+ cores recommended- **RAM**: 16GB minimum, 32GB recommended- **GPU**: Optional (for ML inference acceleration)- **Disk**: 50GB free space---## ­ƒîì Environment Setup### Step 1: Clone Repository```bashcd /Users/Ruben_MACPRO/Desktop/F1\ Project\ NexGen```### Step 2: Create Python Virtual Environment```bash# Create virtual environmentpython3 -m venv agents/venv# Activate virtual environmentsource agents/venv/bin/activate  # macOS/Linux# ORagents\venv\Scripts\activate  # Windows```### Step 3: Install Python Dependencies```bash# Install agent dependenciespip install --upgrade pippip install anthropic==0.39.0pip install nats-py==2.9.0pip install aiohttp==3.10.10pip install python-dotenv==1.0.1pip install pydantic==2.10.3pip install opentelemetry-api==1.28.2pip install opentelemetry-sdk==1.28.2pip install redis==5.2.1pip install motor==3.6.0  # MongoDB async driverpip install qdrant-client==1.12.1```### Step 4: Create Environment File```bash# Copy template to .envcp agents/.env.template agents/.env```---## ­ƒöæ Claude API Configuration### Step 1: Get Your API Key1. Go to [console.anthropic.com](https://console.anthropic.com/)2. Sign up or log in3. Navigate to **API Keys**4. Create a new API key5. Copy the key (starts with `sk-ant-api03-...`)### Step 2: Configure .env FileOpen `agents/.env` and add your API key:```bash# ============================================# ANTHROPIC CLAUDE API# ============================================ANTHROPIC_API_KEY=sk-ant-api03-YOUR-ACTUAL-API-KEY-HERE# Claude ModelsANTHROPIC_MODEL_SONNET=claude-sonnet-4.5-20250929ANTHROPIC_MODEL_HAIKU=claude-haiku-4-20250514# Claude ConfigurationANTHROPIC_MAX_TOKENS=4096ANTHROPIC_TEMPERATURE=0.2ANTHROPIC_TIMEOUT=60```### Step 3: Verify API Key```bash# Test Claude API connectionpython agents/utils/test_anthropic.py```Expected output:```Ô£ô Claude API connection successfulÔ£ô Model: claude-sonnet-4.5-20250929Ô£ô Response received```---## ­ƒÜÇ NATS/SLIM Infrastructure### Step 1: Start NATS Message Broker```bash# Start NATS with Docker Composedocker-compose -f docker-compose.agents.yml up -d nats# Verify NATS is runningdocker ps | grep nats```### Step 2: Verify NATS Connection```bash# Check NATS logsdocker logs qaero-nats# Test NATS connectioncurl http://localhost:8222/varz```Expected output: JSON with NATS server info### Step 3: Start Supporting Services```bash# Start MongoDB (for LangGraph checkpoints)docker-compose -f docker-compose.agents.yml up -d mongodb# Start Redis (for caching)docker-compose -f docker-compose.agents.yml up -d redis# Start Qdrant (for vector storage)docker-compose -f docker-compose.agents.yml up -d qdrant# Verify all servicesdocker-compose -f docker-compose.agents.yml ps```---## ­ƒñû Agent Deployment### Option 1: Deploy All Agents with Docker```bash# Deploy all 8 agentsdocker-compose -f docker-compose.agents.yml up -d# Check agent statusdocker-compose -f docker-compose.agents.yml ps# View agent logsdocker-compose -f docker-compose.agents.yml logs -f master-orchestrator```### Option 2: Run Agents Locally (Development)```bash# Activate virtual environmentsource agents/venv/bin/activate# Run Master Orchestratorpython agents/master_orchestrator/agent.py &# Run Intent Routerpython agents/intent_router/agent.py &# Run Aerodynamics Agentpython agents/aerodynamics/agent.py &# Run ML Surrogate Agentpython agents/ml_surrogate/agent.py &# Run Quantum Optimizer Agentpython agents/quantum_optimizer/agent.py &# Run Physics Validator Agentpython agents/physics_validator/agent.py &# Run Analysis Agentpython agents/analysis/agent.py &# Run Visualization Agentpython agents/visualization/agent.py &```### Agent Startup Order1. **NATS** (infrastructure)2. **Master Orchestrator** (coordinator)3. **Intent Router** (request routing)4. **Specialized Agents** (parallel)---## Ô£à Testing & Verification### Test 1: Agent Health Check```bash# Check all agents are connected to NATScurl http://localhost:8222/connz | jq '.connections[] | .name'```Expected output: List of 8 agent connections### Test 2: Send Test Request```python# test_agent_system.pyimport asynciofrom agents.utils.nats_client import NATSClientasync def test_system():    nats = NATSClient()    await nats.connect()        # Test Master Orchestrator    response = await nats.request(        "agent.orchestrator.query",        {            "query": "Optimize this wing for maximum downforce",            "mesh_id": "wing_v3.2"        },        timeout=30.0    )        print("Response:", response)    await nats.disconnect()asyncio.run(test_system())```Run test:```bashpython test_agent_system.py```### Test 3: Frontend Integration```bash# Start frontendcd frontendnpm installnpm start# Open browseropen http://localhost:3000# Navigate to Claude Chat Interface# Send test message: "Analyze wing aerodynamics"```---## ­ƒöì Monitoring & Observability### Prometheus Metrics```bash# Access Prometheusopen http://localhost:9090# Query agent metricsagent_requests_totalagent_response_time_secondsclaude_api_calls_total```### Grafana Dashboards```bash# Access Grafanaopen http://localhost:3001# Login: admin / admin# Import dashboard: dashboards/agent-monitoring.json```### Agent Logs```bash# View all agent logsdocker-compose -f docker-compose.agents.yml logs -f# View specific agentdocker-compose -f docker-compose.agents.yml logs -f aerodynamics-agent# View NATS logsdocker logs qaero-nats -f```---## ­ƒÉø Troubleshooting### Issue: "ANTHROPIC_API_KEY not found"**Solution:**```bash# Verify .env file existsls -la agents/.env# Check API key is setgrep ANTHROPIC_API_KEY agents/.env# Reload environmentsource agents/.env```### Issue: "Cannot connect to NATS"**Solution:**```bash# Check NATS is runningdocker ps | grep nats# Restart NATSdocker-compose -f docker-compose.agents.yml restart nats# Check NATS logsdocker logs qaero-nats# Verify port 4222 is openlsof -i :4222```### Issue: "Claude API rate limit exceeded"**Solution:**```bash# Check your API usage at console.anthropic.com# Implement rate limiting in .env:RATE_LIMIT_ENABLED=trueRATE_LIMIT_MAX_REQUESTS=50RATE_LIMIT_WINDOW_SECONDS=60```### Issue: "Agent not responding"**Solution:**```bash# Check agent logsdocker-compose -f docker-compose.agents.yml logs agent-name# Restart specific agentdocker-compose -f docker-compose.agents.yml restart agent-name# Verify NATS connectioncurl http://localhost:8222/connz```### Issue: "Out of memory"**Solution:**```bash# Increase Docker memory limit# Edit docker-compose.agents.yml:services:  master-orchestrator:    mem_limit: 8g  # Increase from 4g# Restart servicesdocker-compose -f docker-compose.agents.yml downdocker-compose -f docker-compose.agents.yml up -d```---## ­ƒôè Performance Tuning### Agent ReplicasFor high load, scale agents horizontally:```yaml# docker-compose.agents.ymlservices:  ml-agent:    deploy:      replicas: 3  # Run 3 instances```### NATS ConfigurationOptimize NATS for throughput:```bash# .envNATS_MAX_PAYLOAD=10485760  # 10MBNATS_MAX_PENDING=1048576000  # 1GB```### Claude API Optimization```bash# .envANTHROPIC_MAX_TOKENS=2048  # Reduce for faster responsesANTHROPIC_TEMPERATURE=0.1  # Lower for more deterministicCACHE_ENABLED=true  # Enable response cachingCACHE_TTL=3600  # 1 hour cache```---## ­ƒöÉ Security Best Practices1. **Never commit .env file** (already in .gitignore)2. **Rotate API keys regularly** (every 90 days)3. **Use environment-specific keys** (dev/staging/prod)4. **Enable rate limiting** (prevent abuse)5. **Monitor API usage** (track costs)6. **Use JWT authentication** (for agent-to-agent)7. **Enable TLS for NATS** (production)---## ­ƒôÜ Additional Resources- [Anthropic Claude Documentation](https://docs.anthropic.com/)- [NATS Documentation](https://docs.nats.io/)- [LangGraph Documentation](https://langchain-ai.github.io/langgraph/)- [Docker Compose Documentation](https://docs.docker.com/compose/)---## ­ƒÄ» Quick Start Checklist- [ ] Python 3.10+ installed- [ ] Docker & Docker Compose installed- [ ] Claude API key obtained- [ ] Virtual environment created- [ ] Dependencies installed- [ ] .env file configured- [ ] NATS started- [ ] Agents deployed- [ ] System tested- [ ] Frontend connected---## ­ƒÆí Tips for Success1. **Start small**: Test with Master Orchestrator first2. **Monitor logs**: Watch agent logs during development3. **Use mock data**: Test without backend services initially4. **Cache responses**: Enable caching to reduce API costs5. **Scale gradually**: Add agents as needed6. **Monitor costs**: Track Claude API usage7. **Version control**: Commit working configurations---## ­ƒÜÇ Next StepsAfter setup is complete:1. **Test each agent individually**2. **Run end-to-end workflow**3. **Integrate with frontend**4. **Deploy to production**5. **Set up monitoring**6. **Configure alerts**7. **Optimize performance**---**­ƒÄë You're ready to use the GenAI Multi-Agent System!**For support, check the troubleshooting section or review agent logs.